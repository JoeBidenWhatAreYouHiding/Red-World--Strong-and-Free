focus_tree = {
	id = spain_stalinist
	continuous_focus_position = { x = 50 y = 2000 }
	focus = {
		id = stalinist_factional_deadlock
		icon = factional_deadlock
		cost = 1
		
		available = {
			has_country_flag = spain_stalinist_victory
		}
		
		x = 10
		y = 0
	}
	focus = {
		id = stalinist_call_for_order
		icon = cooperate
		cost = 3
		
		prerequisite = {
			focus = stalinist_factional_deadlock
		}
		
		relative_position_id = stalinist_factional_deadlock
		x = 0
		y = 1
		
		completion_reward = {
			add_political_power = -200
			country_event = {
				id = spain.78
			}
		}
	}
	focus = {
		id = stalinist_committee_elects_frutos
		icon = an_end_to_the_debates
		cost = 5
		
		prerequisite = {
			focus = stalinist_call_for_order
		}
		
		relative_position_id = stalinist_call_for_order
		x = 0
		y = 1
		
		completion_reward = {
			set_politics = {
				ruling_party = communist
				elections_allowed = no
				last_election = "1935.12.17"
				election_frequency = 48
			}
			clr_country_flag = united_left_ministers
			custom_effect_tooltip = spain_stalinist_ministers_tooltip
			hidden_effect = {
				add_ideas = spr_sic_angeles_maestro
				add_ideas = spr_fom_manu_pineda
				add_ideas = spr_ind_txema_guijarro
				add_ideas = spr_nsm_carmelo_antonio_suarez_cabrera
				add_ideas = spr_inm_willy_enrique_meyer_pleite
			}
			add_popularity = {
				ideology = communist
				popularity = 0.20
			}
			country_event = {
				id = spain.79
			}
		}
	}
	focus = {
		id = stalinist_public_execution_of_royal_family
		icon = stalinist_public_execution_of_royal_family
		cost = 6
		
		prerequisite = {
			focus = stalinist_committee_elects_frutos
		}
		
		relative_position_id = stalinist_committee_elects_frutos
		x = 0
		y = 1
		
		completion_reward = {
			set_country_flag = spr_felipe_is_dead
			add_popularity = {
				ideology = monarchist
				popularity = -0.2
			}
			add_stability = 0.1
			add_political_power = -300
			country_event = {
				id = spain.75
			}
			hidden_effect = {
				every_country = {
					limit = {
						NOT = {
							OR = {
								tag = SPR
								tag = SPN
							}
						}
					}
					news_event = {
						id = spain_news.23
					}
				}
			}
		}
	}
	focus = {
		id = stalinist_introduce_state_trade_unions
		icon = establish_nationalisation_ministry
		cost = 7.2
		
		prerequisite = {
			focus = stalinist_public_execution_of_royal_family
		}
		
		relative_position_id = stalinist_public_execution_of_royal_family
		x = 0
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_SPR_nationalized_unions
			}
			IF = {
				limit = {
					has_completed_focus = stalinist_united_workers_front
				}
				remove_ideas = {
					idea_SPR_general_strike_2
				}
			}
			IF = {
				limit = {
					NOT = {
						has_completed_focus = stalinist_united_workers_front
					}
				}
				swap_ideas = {
					remove_idea = idea_SPR_general_strike
					add_idea = idea_SPR_general_strike_2
				}
			}
			custom_effect_tooltip = spr_communist_spain_lets_in_syndicalists
		}
	}
	focus = {
		id = stalinist_tightly_controlled_press
		icon = focus_undermine_local_media
		cost = 6
		
		prerequisite = {
			focus = stalinist_introduce_state_trade_unions
		}
		
		relative_position_id = stalinist_introduce_state_trade_unions
		x = 0
		y = 1
		
		completion_reward = {
			add_ideas = {idea_SPR_media_control}
			country_event = {
				id = spain.336
			}
		}
	}
	focus = {
		id = stalinist_assign_commissars_to_military_command
		icon = SPR_party_members_military
		cost = 7.2
		
		prerequisite = {
			focus = stalinist_committee_elects_frutos
		}
		
		relative_position_id = stalinist_committee_elects_frutos
		x = -2
		y = 1
		completion_reward = {
			swap_ideas = {
				remove_idea = idea_SPR_bloated_military
				add_idea = idea_SPR_bloated_military_2
			}
			country_event = {
				id = spain.337
			}
		}
	}
	focus = {
		id = stalinist_execute_disloyal_generals
		icon = execute_disloyal_generals
		cost = 10
		
		prerequisite = {
			focus = stalinist_assign_commissars_to_military_command
		}
		
		relative_position_id = stalinist_assign_commissars_to_military_command
		x = 0
		y = 2
		completion_reward = {
			swap_ideas = {
				remove_idea = idea_SPR_bloated_military_2
				add_idea = idea_SPR_loyal_military
			}
			add_timed_idea = {
				idea = idea_SPR_purged_military
				days = 365
			}
			hidden_effect = {
				IF = {
					limit = {
						tag = SPR
					}
					retire_character = SPR_Teodoro_Esteban_Lopez_Calderon
					retire_character = SPR_Fernando_Garcia_Sanchez
					retire_character = SPR_Antonio_Martorell_Lacave
					retire_character = SPR_Fulgencio_Coll_Bucher
					retire_character = SPR_Francisco_Javier_Varela_Salas
					retire_character = SPR_Felix_Sanz_Roldan
					retire_character = SPR_Agustin_Rosety
					retire_character = SPR_Antonio_Budino
					retire_character = SPR_Luis_Cebrian
					retire_character = SPR_Alberto_Asarta
					retire_character = SPR_Carlos_Villar_Turrau
					retire_character = SPR_Miguel_Angel_Ballesteros
					retire_character = SPR_Rafael_Comas
					retire_character = SPR_Fernando_Lens_Astray
					retire_character = SPR_Miguel_Angel_Villarroya
				}
				IF = {
					limit = {
						tag = SPN
					}
					retire_character = SPN_Teodoro_Esteban_Lopez_Calderon
					retire_character = SPN_Fernando_Garcia_Sanchez
					retire_character = SPN_Antonio_Martorell_Lacave
					retire_character = SPN_Fulgencio_Coll_Bucher
					retire_character = SPN_Francisco_Javier_Varela_Salas
					retire_character = SPN_Felix_Sanz_Roldan
					retire_character = SPN_Agustin_Rosety
					retire_character = SPN_Antonio_Budino
					retire_character = SPN_Luis_Cebrian
					retire_character = SPN_Alberto_Asarta
					retire_character = SPN_Carlos_Villar_Turrau
					retire_character = SPN_Miguel_Angel_Ballesteros
					retire_character = SPN_Rafael_Comas
					retire_character = SPN_Fernando_Lens_Astray
					retire_character = SPN_Miguel_Angel_Villarroya
				}
			}
			add_manpower = -300
			custom_effect_tooltip = spr_we_will_purge_a_lot_of_generals
			hidden_effect = {
				add_ideas = {
					idea_SPR_hidden_ideas_to_make_spain_make_more_divisions_but_bigger
				}
			}
			country_event = {
				id = spain.338
			}
		}
	}
	focus = {
		id = stalinist_seize_wealth_from_banks_and_ceos
		icon = crush_minnesota_elites
		cost = 6
		
		prerequisite = {
			focus = stalinist_committee_elects_frutos
		}
		
		relative_position_id = stalinist_committee_elects_frutos
		x = 2
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_SPR_seized_wealth
			}
			country_event = {
				id = spain.339
			}
		}
	}
	focus = {
		id = stalinist_united_workers_front
		icon = mass_socialist_organisation_focus
		cost = 7.2
		
		prerequisite = {
			focus = stalinist_seize_wealth_from_banks_and_ceos
		}
		
		relative_position_id = stalinist_seize_wealth_from_banks_and_ceos
		x = 0
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_SPR_united_workers_front
			}
			IF = {
				limit = {
					has_completed_focus = stalinist_introduce_state_trade_unions
				}
				remove_ideas = {
					idea_SPR_general_strike_2
				}
			}
			IF = {
				limit = {
					NOT = {
						has_completed_focus = stalinist_introduce_state_trade_unions
					}
				}
				swap_ideas = {
					remove_idea = idea_SPR_general_strike
					add_idea = idea_SPR_general_strike_2
				}
			}
			country_event = {
				id = spain.340
			}
		}
	}
	focus = {
		id = stalinist_crush_catholic_church
		icon = ban_christian_groups
		cost = 5
		
		prerequisite = {
			focus = stalinist_united_workers_front
		}
		
		relative_position_id = stalinist_united_workers_front
		x = 0
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_SPR_state_atheism
			}
		    random_owned_state = {
			    add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			country_event = {
				id = spain.341
			}
		}
	}
	focus = {
		id = stalinist_the_spanish_socialist_state_secured
		icon = communist_star
		cost = 10
		
		prerequisite = {
			focus = stalinist_crush_catholic_church
		}
		prerequisite = {
			focus = stalinist_tightly_controlled_press
		}
		prerequisite = {
			focus = stalinist_execute_disloyal_generals
		}
		
		relative_position_id = stalinist_tightly_controlled_press
		x = 0
		y = 1
		
		completion_reward = {
			remove_ideas = {idea_SPR_lingering_military_radicalism}
			add_stability = 0.05
			set_cosmetic_tag = SPR_spanish_stalin
			add_ai_strategy = {
				type = force_build_armies
				value = 50
			}
			IF = {
				limit = {
					OR = {
						has_idea = idea_SPR_separatist_woes_basques_appeased
						has_idea = idea_SPR_separatist_woes_basques_worse_rest_norm
						has_idea = idea_SPR_separatist_woes_basques_and_galicians_appeased
						has_idea = idea_SPR_separatist_woes_basques_good_galicians_bad
						has_idea = idea_SPR_separatist_woes_basques_bad_galicians_good
						has_idea = idea_SPR_separatist_woes_basques_bad_galicians_bad
						has_idea = idea_SPR_separatist_woes_basques_bad_galicians_bad_catalans_good
						has_idea = idea_SPR_separatist_woes_basques_good_galicians_bad_catalans_good
						has_idea = idea_SPR_separatist_woes_basques_bad_galicians_good_catalans_good
						has_idea = idea_SPR_separatist_woes_start
					}
				}
				remove_ideas = {idea_SPR_separatist_woes_start}
				hidden_effect = {
					remove_ideas = {
						idea_SPR_separatist_woes_basques_appeased
						idea_SPR_separatist_woes_basques_worse_rest_norm
						idea_SPR_separatist_woes_basques_and_galicians_appeased
						idea_SPR_separatist_woes_basques_good_galicians_bad
						idea_SPR_separatist_woes_basques_bad_galicians_good
						idea_SPR_separatist_woes_basques_bad_galicians_bad
						idea_SPR_separatist_woes_basques_bad_galicians_bad_catalans_good
						idea_SPR_separatist_woes_basques_good_galicians_bad_catalans_good
						idea_SPR_separatist_woes_basques_bad_galicians_good_catalans_good
					}
				}
			}
			hidden_effect = {
				every_owned_state = {
					limit = {
						has_dynamic_modifier = { modifier = autonomous_state }
					}
					remove_dynamic_modifier = { modifier = autonomous_state }
				}
			}
			country_event = {
				id = spain.342
			}
		}
	}
	focus = {
		id = stalinist_rehabilitate_seced
		icon = SPA_SECED_commie
		cost = 8
		
		prerequisite = {
			focus = stalinist_the_spanish_socialist_state_secured
		}

		relative_position_id = stalinist_the_spanish_socialist_state_secured
		x = 0
		y = 1
		
		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				create_intelligence_agency = {
					name = "SECED"
					icon = GFX_intelligence_agency_logo_agency
				}
			}
			add_ideas = {
				idea_SPR_rehabilitated_seced
			}
		}
	}
	focus = {
		id = stalinist_begin_rapid_industrial_modernization
		icon = Industry_PCA
		cost = 10
		
		prerequisite = {
			focus = stalinist_rehabilitate_seced
		}

		relative_position_id = stalinist_rehabilitate_seced
		x = -1
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_SPR_rapid_industrial_modernization
			}
			swap_ideas = {
				remove_idea = idea_SPR_backwards_economy
				add_idea = idea_SPR_backwards_economy_2
			}
		}
	}
	focus = {
		id = stalinist_industrial_expansion_in_andalusia_and_extremadura
		icon = Industrial_Expansion_andalusia_extremadura
		cost = 10
		
		prerequisite = {
			focus = stalinist_begin_rapid_industrial_modernization
		}

		relative_position_id = stalinist_begin_rapid_industrial_modernization
		x = -1
		y = 1
		completion_reward = {
		    169 = {
			    add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		    173 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = stalinist_industrial_expansion_in_castille_and_madrid
		icon = SPR_Industrial_Expansion_castille_madrid
		cost = 10
		
		prerequisite = {
			focus = stalinist_begin_rapid_industrial_modernization
		}

		relative_position_id = stalinist_begin_rapid_industrial_modernization
		x = -3
		y = 1
		completion_reward = {
		    41 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex
					level = 4
					instant_build = yes
				}
			}
		    176 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		
	}
	focus = {
		id = stalinist_industrial_expansion_in_catalonia_galicia_and_basque_country
		icon = SPR_Industrial_Expansion_galicia_basque_catalonia
		cost = 10
		
		prerequisite = {
			focus = stalinist_industrial_expansion_in_castille_and_madrid
		}
		prerequisite = {
			focus = stalinist_industrial_expansion_in_andalusia_and_extremadura
		}

		available = {
			AND = {
				NOT = {
					country_exists = CAT
				}
				NOT = {
					country_exists = GAL
				}
				NOT = {
					country_exists = BSQ
				}
				owns_state = 171
				owns_state = 1020
				owns_state = 172
				owns_state = 165
				owns_state = 911
			}
		}

		relative_position_id = stalinist_industrial_expansion_in_castille_and_madrid
		x = 1
		y = 1
		completion_reward = {
		    172 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		    165 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		    171 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = stalinist_create_the_agrarian_collective_agency
		icon = agrarian_socialism
		cost = 6
		
		prerequisite = {
			focus = stalinist_begin_rapid_industrial_modernization
		}

		relative_position_id = stalinist_begin_rapid_industrial_modernization
		x = 1
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_SPR_agrarian_collective_agency
			}
			random_owned_state = {
			    add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_state = {
			    add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			country_event = {
				id = spain.345
			}
		}
	}
	focus = {
		id = stalinist_reduce_agricultural_quotas
		icon = GFX_goal_generic_agriculture
		cost = 5
		
		prerequisite = {
			focus = stalinist_create_the_agrarian_collective_agency
		}

		relative_position_id = stalinist_create_the_agrarian_collective_agency
		x = 0
		y = 1
		
		completion_reward = {
			swap_ideas = {
				remove_idea = idea_SPR_agrarian_collective_agency
				add_idea = idea_SPR_agrarian_collective_agency_2
			}
		}
	}
	focus = {
		id = stalinist_expand_state_farms
		icon = ethiopia_self_sufficiency
		cost = 10
		
		prerequisite = {
			focus = stalinist_reduce_agricultural_quotas
		}
		prerequisite = {
			focus = stalinist_industrial_expansion_in_catalonia_galicia_and_basque_country
		}

		relative_position_id = stalinist_reduce_agricultural_quotas
		x = -1
		y = 1
		
		completion_reward = {
			swap_ideas = {
				remove_idea = idea_SPR_agrarian_collective_agency_2
				add_idea = idea_SPR_agrarian_collective_agency_3
			}
		    random_owned_state = {
			    add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		    random_owned_state = {
			    add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = stalinist_demand_the_return_of_breakaways
		icon = live_up_to_the_name_one_spain
		cost = 5
		
		available = {
			OR = {
				country_exists = CAT
				country_exists = BSQ
				country_exists = GAL
			}
		}
		
		prerequisite = {
			focus = stalinist_rehabilitate_seced
		}
		
		bypass = {
			AND = {
				NOT = {
					country_exists = CAT
				}
				NOT = {
					country_exists = GAL
				}
				NOT = {
					country_exists = BSQ
				}
			}
		}

		relative_position_id = stalinist_rehabilitate_seced
		x = 1
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					country_exists = CAT
				}
				CAT = {
					country_event = {
						id = spain_diplo.7
					}
				}
			}
			IF = {
				limit = {
					country_exists = BSQ
				}
				BSQ = {
					country_event = {
						id = spain_diplo.10
					}
				}
			}
			IF = {
				limit = {
					country_exists = GAL
				}
				GAL = {
					country_event = {
						id = spain_diplo.13
					}
				}
			}
		}
	}
	focus = {
		id = stalinist_recognize_citizenship_of_colonial_subjects
		icon = Grant_Citizenship_to_Spanish_Africa
		cost = 5
		
		available = {
			OR = {
				country_exists = EQG
				owns_state = 297
			}
		}
		
		prerequisite = {
			focus = stalinist_rehabilitate_seced
		}

		relative_position_id = stalinist_rehabilitate_seced
		x = 3
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					owns_state = 297
				}
				297 = {
					add_core_of = ROOT
				}
			}
			IF = {
				limit = {
					country_exists = EQG
				}
				297 = {
					add_claim_by = ROOT
				}
				EQG = {
					country_event = {
						id = spain_diplo.4
					}
				}
			}
		}
	}
	focus = {
		id = stalinist_promote_anti_nationalism
		icon = propaganda
		cost = 10
		
		available = {
			owns_state = 171
			owns_state = 1020
			owns_state = 172
			owns_state = 165
			owns_state = 911
		}
		
		bypass = {
			171 = {
				is_core_of = ROOT
			}
			1020 = {
				is_core_of = ROOT
			}
			172 = {
				is_core_of = ROOT
			}
			165 = {
				is_core_of = ROOT
			}
			911 = {
				is_core_of = ROOT
			}
		}
		
		prerequisite = {
			focus = stalinist_demand_the_return_of_breakaways
		}
		prerequisite = {
			focus = stalinist_recognize_citizenship_of_colonial_subjects
		}

		relative_position_id = stalinist_demand_the_return_of_breakaways
		x = 1
		y = 1
		
		completion_reward = {
			every_state = {
				limit = {
					is_core_of = CAT
				}
				add_core_of = ROOT
			}
			every_state = {
				limit = {
					is_core_of = GAL
				}
				add_core_of = ROOT
			}
			every_state = {
				limit = {
					is_core_of = BSQ
				}
				add_core_of = ROOT
			}
			every_state = {
				limit = {
					is_core_of = EQG
					NOT = {
						is_core_of = ROOT
					}
				}
				add_core_of = ROOT
			}
			country_event = {
				id = spain.347
			}
		}
	}
	focus = {
		id = stalinist_secure_iberia
		icon = portugal_attack
		cost = 5
		
		prerequisite = {
			focus = stalinist_promote_anti_nationalism
		}

		relative_position_id = stalinist_promote_anti_nationalism
		x = 0
		y = 1
		
		completion_reward = {
			create_wargoal = {
				type = annex_everything
				target = POR
			}
			every_state = {
				limit = {
					is_core_of = POR
				}
				add_claim_by = ROOT
			}
		}
	}
	focus = {
		id = stalinist_portuguese_integration_campaign
		icon = pro_soviet_propaganda
		cost = 10
		
		prerequisite = {
			focus = stalinist_secure_iberia
		}
		available = {
			AND = {
				NOT = {
					country_exists = POR
				}
				owns_state = 180
				owns_state = 181
				owns_state = 112
				owns_state = 179
			}
		}

		relative_position_id = stalinist_secure_iberia
		x = 0
		y = 1
		
		completion_reward = {
			every_state = {
				limit = {
					is_core_of = POR
				}
				add_core_of = ROOT
			}
			set_cosmetic_tag = SPR_iberian_stalin
			country_event = {
				id = spain.348
			}
		}
	}
	focus = {
		id = stalinist_the_revolution_secured
		icon = reap_the_rewards_of_frutos_gamble
		cost = 10
		
		prerequisite = {
			focus = stalinist_portuguese_integration_campaign
		}
		prerequisite = {
			focus = stalinist_expand_state_farms
		}

		relative_position_id = stalinist_rehabilitate_seced
		x = 0
		y = 5
		completion_reward = {
			remove_ideas = {idea_SPR_backwards_economy_2}
			add_ideas = {idea_SPR_miracle_of_spanish_stalinism}
			country_event = {
				id = spain.350
			}
		}
	}
	focus = {
		id = SPR_stalinist_allow_women_in_the_armed_forces
		icon = new_soviet_woman
		cost = 10
		prerequisite = {
			focus = stalinist_the_revolution_secured
		}

		relative_position_id = stalinist_the_revolution_secured
		x = 2
		y = 1
		
		completion_reward = {
			add_ideas = {idea_spr_women_in_the_armed_forces}
			division_template = {
				name = "Women's Infantry"
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					artillery_brigade = { x = 1 y = 2 }
					
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
				support = {
					engineer = { x = 0 y = 0 }
					recon = { x = 0 y = 1 }
				}
			}
			random_owned_state = {
				limit = {
					is_core_of = ROOT
				}
				create_unit = {
					division = "name = \"Schoonheyt Company\" division_template = \"Women's Infantry\" start_experience_factor = 0.05 start_equipment_factor = 1"
					owner = ROOT
				}
			}
			random_owned_state = {
				limit = {
					is_core_of = ROOT
				}
				create_unit = {
					division = "name = \"Rukeyser Company\" division_template = \"Women's Infantry\" start_experience_factor = 0.05 start_equipment_factor = 1"
					owner = ROOT
				}
			}
			IF = {
				limit = {
					tag = SPR
				}
				add_corps_commander_role = {
					Character = SPR_Patricia_Ortega
					traits={ brilliant_strategist trait_cautious infantry_officer skilled_staffer organizer}
					skill=3
					attack_skill=3
					defense_skill=2
					planning_skill=3
					logistics_skill=3
				}
				add_corps_commander_role = {
					Character = SPR_Begona_Aramendia_Rodriguez
					traits={ brilliant_strategist trait_cautious commando trickster }
					skill=3
					attack_skill=2
					defense_skill=3
					planning_skill=3
					logistics_skill=3
				}
				add_corps_commander_role = {
					Character = SPR_Ana_Betegon
					traits={ inflexible_strategist trait_cautious engineer_officer trait_engineer adaptable }
					skill=2
					attack_skill=1
					defense_skill=3
					planning_skill=2
					logistics_skill=3
				}
			}
			IF = {
				limit = {
					tag = SPN
				}
				add_corps_commander_role = {
					Character = SPN_Patricia_Ortega
					traits={ brilliant_strategist trait_cautious infantry_officer skilled_staffer organizer}
					skill=3
					attack_skill=3
					defense_skill=2
					planning_skill=3
					logistics_skill=3
				}
				add_corps_commander_role = {
					Character = SPN_Begona_Aramendia_Rodriguez
					traits={ brilliant_strategist trait_cautious commando trickster }
					skill=3
					attack_skill=2
					defense_skill=3
					planning_skill=3
					logistics_skill=3
				}
				add_corps_commander_role = {
					Character = SPN_Ana_Betegon
					traits={ inflexible_strategist trait_cautious engineer_officer trait_engineer adaptable }
					skill=2
					attack_skill=1
					defense_skill=3
					planning_skill=2
					logistics_skill=3
				}
			}
			country_event = {
				id = spain.214
			}
		}
	}
	focus = {
		id = stalinist_increase_commissar_influence
		icon = socialism_focus
		cost = 7.2
		
		prerequisite = {
			focus = SPR_stalinist_allow_women_in_the_armed_forces
		}
		
		relative_position_id = SPR_stalinist_allow_women_in_the_armed_forces
		x = 1
		y = 1
		completion_reward = {
			swap_ideas = {
				remove_idea = idea_SPR_loyal_military
				add_idea = idea_SPR_loyal_military_2
			}
			IF = {
				limit = {
					tag = SPR
				}
				add_corps_commander_role = {
					Character = SPR_Carmelo_Suarez
					traits={ politically_connected war_hero old_guard inflexible_strategist commando }
					skill=3
					attack_skill=2
					defense_skill=2
					planning_skill=3
					logistics_skill=4
				}
				add_corps_commander_role = {
					Character = SPR_Eugenio_del_Rio
					traits={ politically_connected war_hero old_guard brilliant_strategist skilled_staffer trickster urban_assault_specialist infantry_leader ambusher }
					skill=3
					attack_skill=2
					defense_skill=4
					planning_skill=4
					logistics_skill=1
				}
				add_corps_commander_role = {
					Character = SPR_Roberto_Vaquero_general
					traits={ politically_connected trait_reckless media_personality harsh_leader  }
					skill=2
					attack_skill=2
					defense_skill=1
					planning_skill=2
					logistics_skill=2
				}
			}
			IF = {
				limit = {
					tag = SPN
				}
				add_corps_commander_role = {
					Character = SPN_Carmelo_Suarez
					traits={ politically_connected war_hero old_guard inflexible_strategist commando }
					skill=3
					attack_skill=2
					defense_skill=2
					planning_skill=3
					logistics_skill=4
				}
				add_corps_commander_role = {
					Character = SPN_Eugenio_del_Rio
					traits={ politically_connected war_hero old_guard brilliant_strategist skilled_staffer trickster urban_assault_specialist infantry_leader ambusher }
					skill=3
					attack_skill=2
					defense_skill=4
					planning_skill=4
					logistics_skill=1
				}
				add_corps_commander_role = {
					Character = SPN_Roberto_Vaquero_general
					traits={ politically_connected trait_reckless media_personality harsh_leader  }
					skill=2
					attack_skill=2
					defense_skill=1
					planning_skill=2
					logistics_skill=2
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_foster_youth_radicalism
		icon = communist_flag_propaganda_focus
		cost = 7.2
		prerequisite = {
			focus = stalinist_the_revolution_secured
		}

		relative_position_id = stalinist_the_revolution_secured
		x = -2
		y = 1
		
		completion_reward = {
			add_ideas = {idea_spr_youth_radicalism}
			country_event = {
				id = spain.349
			}
		}
	}
	focus = {
		id = SPR_stalinist_spains_five_year_plan
		icon = GFX_goal_Five_Year_Plan
		cost = 10
		prerequisite = {
			focus = stalinist_the_revolution_secured
		}

		relative_position_id = stalinist_the_revolution_secured
		x = 0
		y = 1
		
		completion_reward = {
			add_timed_idea = {
				idea = idea_spr_spanish_five_year_plan
				days = 1826
			}
		}
	}
	focus = {
		id = SPR_stalinist_open_state_mining_operations
		icon = steel
		cost = 7.2
		prerequisite = {
			focus = SPR_stalinist_spains_five_year_plan
		}

		relative_position_id = SPR_stalinist_spains_five_year_plan
		x = 1
		y = 1
		
		completion_reward = {
			176 = {
				add_resource = {
					type = steel
					amount = 25
				}
				add_resource = {
					type = aluminium
					amount = 6
				}
			}
			41 = {
				add_resource = {
					type = steel
					amount = 7
				}
				add_resource = {
					type = aluminium
					amount = 20
				}
			}
			170 = {
				add_resource = {
					type = tungsten
					amount = 15
				}
				add_resource = {
					type = chromium
					amount = 3
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_expand_central_military_industries
		icon = industry_2
		cost = 7.2
		prerequisite = {
			focus = SPR_stalinist_spains_five_year_plan
		}

		relative_position_id = SPR_stalinist_spains_five_year_plan
		x = -1
		y = 1
		
		completion_reward = {
			176 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			41 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			175 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_invest_in_underindustrialized_regions
		icon = communist_construction
		cost = 10
		prerequisite = {
			focus = SPR_stalinist_spains_five_year_plan
		}

		relative_position_id = SPR_stalinist_spains_five_year_plan
		x = 0
		y = 2
		
		completion_reward = {
			170 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			169 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			173 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			178 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			175 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			IF = {
				limit = {
					owns_state = 921
				}
				921 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			IF = {
				limit = {
					owns_state = 931
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_spanish_socialist_science
		icon = Technology_PCA
		cost = 7.2
		prerequisite = {
			focus = SPR_stalinist_foster_youth_radicalism
		}

		relative_position_id = SPR_stalinist_foster_youth_radicalism
		x = -1
		y = 1
		
		completion_reward = {
			add_research_slot = 1
			swap_ideas = {
				remove_idea = idea_SPR_miracle_of_spanish_stalinism
				add_idea = idea_SPR_miracle_of_spanish_stalinism_2
			}
		}
	}
	
	
###Foreign Policy###
	focus = {
		id = SPR_stalinist_fopo_foreign_policy
		icon = focus_commonwealth_un_membership
		cost = 3
		
		available = {
			has_completed_focus = stalinist_the_spanish_socialist_state_secured
		}

		x = 30
		y = 0
		
		completion_reward = {
			add_political_power = 100
		}
	}
	focus = {
		id = SPR_stalinist_fopo_our_former_colonies
		icon = Our_Former_Colonies_SPR
		cost = 4
		
		available = {
			NOT = {
				has_idea = idea_SPR_backwards_economy
				has_idea = idea_SPR_backwards_economy_2
				has_idea = idea_SPR_backwards_economy_3
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_foreign_policy
		}

		relative_position_id = SPR_stalinist_fopo_foreign_policy
		x = 0
		y = 1
		
		completion_reward = {
			add_stability = 0.05
			add_political_power = 50
		}
	}
	focus = {
		id = SPR_stalinist_fopo_make_contact_with_latam_revolutionaries
		icon = agrarian_socialism
		cost = 6
		
		available = {
			OR = {
				has_government = revolutionary_socialist
				has_government = communist
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_our_former_colonies
		}

		relative_position_id = SPR_stalinist_fopo_our_former_colonies
		x = 0
		y = 1
		
		completion_reward = {
			every_country = {
				limit = {
					AND = {
						OR = {
							tag = CEA
							tag = MEX
							tag = RIO
							tag = SON
							tag = GUA
							tag = HON
							tag = ELS
							tag = COS
							tag = PAN
							tag = COL
							tag = VEN
							tag = ECU
							tag = PRU
							tag = BOL
							tag = PAR
							tag = URG
							tag = CHL
							tag = ARG
							tag = CUB
							tag = HAI
							tag = DOM
							tag = ANT
							tag = TAT
							tag = GND
							tag = BRA
							tag = SUL
						}
						NOT = {
							has_government = communist
						}
						NOT = {
							has_government = revolutionary_socialist
						}
						NOT = {
							has_government = moderate_socialist
						}
					}
				}
				country_event = {
					id = spain_diplo.118
				}
				add_stability = -0.05
				add_war_support = 0.05
				add_popularity = {
					ideology = revolutionary_socialist
					popularity = 0.01
				}
				add_popularity = {
					ideology = communist
					popularity = 0.01
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_align_latam_socialist_states
		icon = propaganda
		cost = 8
		
		prerequisite = {
			focus = SPR_stalinist_fopo_make_contact_with_latam_revolutionaries
		}

		relative_position_id = SPR_stalinist_fopo_make_contact_with_latam_revolutionaries
		x = -1
		y = 1
		
		completion_reward = {
			every_country = {
				limit = {
					AND = {
						OR = {
							tag = CEA
							tag = MEX
							tag = RIO
							tag = SON
							tag = GUA
							tag = HON
							tag = ELS
							tag = COS
							tag = PAN
							tag = COL
							tag = VEN
							tag = ECU
							tag = PRU
							tag = BOL
							tag = PAR
							tag = URG
							tag = CHL
							tag = ARG
							tag = CUB
							tag = HAI
							tag = DOM
							tag = ANT
							tag = TAT
							tag = GND
							tag = BRA
							tag = SUL
						}
						OR = {
							has_government = communist
							has_government = revolutionary_socialist
						}
					}
				}
				IF = {
					limit = {
						country_exists = SPR
					}
					add_opinion_modifier = {
						target = SPR
						modifier = spr_latam_madrid_conference
					}
				}
				IF = {
					limit = {
						country_exists = SPN
					}
					add_opinion_modifier = {
						target = SPN
						modifier = spr_latam_madrid_conference
					}
				}
				country_event = {
					id = spain_diplo.120
				}
			}
			country_event = {
				id = spain_diplo.119
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_iberian_american_resource_exchange
		icon = socialist_industry_generic
		cost = 10
		
		prerequisite = {
			focus = SPR_stalinist_fopo_make_contact_with_latam_revolutionaries
		}

		relative_position_id = SPR_stalinist_fopo_make_contact_with_latam_revolutionaries
		x = 1
		y = 1
		
		completion_reward = {
			every_country = {
				limit = {
					AND = {
						OR = {
							tag = CEA
							tag = MEX
							tag = RIO
							tag = SON
							tag = GUA
							tag = HON
							tag = ELS
							tag = COS
							tag = PAN
							tag = COL
							tag = VEN
							tag = ECU
							tag = PRU
							tag = BOL
							tag = PAR
							tag = URG
							tag = CHL
							tag = ARG
							tag = CUB
							tag = HAI
							tag = DOM
							tag = ANT
							tag = TAT
							tag = GND
							tag = BRA
							tag = SUL
						}
						OR = {
							has_government = communist
							has_government = revolutionary_socialist
						}
					}
				}
				country_event = {
					id = spain_diplo.123
				}
			}
			add_ideas = {
				idea_spr_iberian_american_resource_exchange
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_meet_with_leftist_militants
		icon = accomodate_the_hardliners
		cost = 7.2
		
		prerequisite = {
			focus = SPR_stalinist_fopo_iberian_american_resource_exchange
		}
		prerequisite = {
			focus = SPR_stalinist_fopo_align_latam_socialist_states
		}

		relative_position_id = SPR_stalinist_fopo_iberian_american_resource_exchange
		x = -1
		y = 1
		
		completion_reward = {
			hidden_effect = {
				add_ideas = {
					idea_SPR_hidden_ideas_to_make_spain_make_more_divisions
				}
			}
			every_country = {
				limit = {
					AND = {
						OR = {
							tag = CEA
							tag = MEX
							tag = RIO
							tag = SON
							tag = GUA
							tag = HON
							tag = ELS
							tag = COS
							tag = PAN
							tag = COL
							tag = VEN
							tag = ECU
							tag = PRU
							tag = BOL
							tag = PAR
							tag = URG
							tag = CHL
							tag = ARG
							tag = CUB
							tag = HAI
							tag = DOM
							tag = ANT
							tag = TAT
							tag = GND
							tag = BRA
							tag = SUL
						}
						NOT = {
							has_government = communist
						}
						NOT = {
							has_government = revolutionary_socialist
						}
						NOT = {
							has_government = moderate_socialist
						}
					}
				}
				country_event = {
					id = spain_diplo.126
				}
				add_ideas = {
					idea_spr_spain_agitating_militants
				}
				set_country_flag = spr_target_of_the_spanish_revolution
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_spread_the_revolution
		icon = red_brigades
		cost = 10
		
		available = {
			NOT = {
				has_idea = idea_SPR_bloated_military
				has_idea = idea_SPR_bloated_military_2
			}
			has_army_manpower = {
				size > 750000
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_meet_with_leftist_militants
		}

		relative_position_id = SPR_stalinist_fopo_meet_with_leftist_militants
		x = 0
		y = 1
		
		completion_reward = {
			custom_effect_tooltip = spr_we_will_begin_our_spreading_of_socialism_through_latin_america
			IF = {
				limit = {
					CEA = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = CEA
				}
			}
			IF = {
				limit = {
					MEX = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = MEX
				}
			}
			IF = {
				limit = {
					RIO = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = RIO
				}
			}
			IF = {
				limit = {
					SON = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = SON
				}
			}
			IF = {
				limit = {
					GUA = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = GUA
				}
			}
			IF = {
				limit = {
					HON = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = HON
				}
			}
			IF = {
				limit = {
					ELS = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = ELS
				}
			}
			IF = {
				limit = {
					COS = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = COS
				}
			}
			IF = {
				limit = {
					PAN = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = PAN
				}
			}
			IF = {
				limit = {
					COL = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = COL
				}
			}
			IF = {
				limit = {
					VEN = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = VEN
				}
			}
			IF = {
				limit = {
					ECU = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = ECU
				}
			}
			IF = {
				limit = {
					PRU = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = PRU
				}
			}
			IF = {
				limit = {
					BOL = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = BOL
				}
			}
			IF = {
				limit = {
					PAR = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = PAR
				}
			}
			IF = {
				limit = {
					URG = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = URG
				}
			}
			IF = {
				limit = {
					CHL = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = CHL
				}
			}
			IF = {
				limit = {
					ARG = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = ARG
				}
			}
			IF = {
				limit = {
					CUB = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = CUB
				}
			}
			IF = {
				limit = {
					HAI = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = HAI
				}
			}
			IF = {
				limit = {
					DOM = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = DOM
				}
			}
			IF = {
				limit = {
					ANT = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = ANT
				}
			}
			IF = {
				limit = {
					TAT = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = TAT
				}
			}
			IF = {
				limit = {
					GND = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = GND
				}
			}
			IF = {
				limit = {
					BRA = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = BRA
				}
			}
			IF = {
				limit = {
					SUL = {
						has_idea = idea_spr_spain_agitating_militants
					}
				}
				create_wargoal = {
					type = annex_everything
					target = SUL
				}
			}
			every_country = {
				limit = {
					has_idea = idea_spr_spain_agitating_militants
				}
				remove_ideas = {
					idea_spr_spain_agitating_militants
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_addressing_our_neighbors
		icon = SPR_adressing_our_neighbors
		cost = 1
		
		available = {
			NOT = {
				has_idea = idea_SPR_backwards_economy
				has_idea = idea_SPR_bloated_military
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_foreign_policy
		}

		relative_position_id = SPR_stalinist_fopo_foreign_policy
		x = -4
		y = 1
		
		completion_reward = {
			add_political_power = 25
		}
	}
	focus = {
		id = SPR_stalinist_fopo_pursue_friendship_with_morocco
		icon = morocco
		cost = 3
		
		available = {
			MOR = {
				has_government = communist
			}
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_fopo_embargo_morocco
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_addressing_our_neighbors
		}

		relative_position_id = SPR_stalinist_fopo_addressing_our_neighbors
		x = 0
		y = 1
		
		completion_reward = {
            add_opinion_modifier = {
				target = MOR
				modifier = spr_por_normalized_relations
			}
			country_event = {
				id = spain_diplo.86
			}
            MOR = {
                add_opinion_modifier = {
					target = ROOT
					modifier = spr_por_normalized_relations
				}
				country_event = {
					id = spain_diplo.87
				}
            }
		}
	}
	focus = {
		id = SPR_stalinist_fopo_negotiate_basing_rights
		icon = GAL_adopt_a_good_neighbor_policy
		cost = 8
		
		prerequisite = {
			focus = SPR_stalinist_fopo_pursue_friendship_with_morocco
		}

		relative_position_id = SPR_stalinist_fopo_pursue_friendship_with_morocco
		x = 0
		y = 1
		
		completion_reward = {
			MOR = {
				country_event = {
					id = spain_diplo.88
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_the_matter_of_ceuta_and_melilla
		icon = peace_chance
		cost = 7
		
		prerequisite = {
			focus = SPR_stalinist_fopo_negotiate_basing_rights
		}

		relative_position_id = SPR_stalinist_fopo_negotiate_basing_rights
		x = 0
		y = 1
		
		completion_reward = {
			country_event = {
				id = spain_diplo.91
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_invite_morocco_to_economic_pact
		icon = investigate_industrial_corruption
		cost = 7
		
		prerequisite = {
			focus = SPR_stalinist_fopo_negotiate_basing_rights
		}

		relative_position_id = SPR_stalinist_fopo_negotiate_basing_rights
		x = 2
		y = 1
		
		completion_reward = {
			MOR = {
				country_event = {
					id = spain_diplo.92
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_embargo_morocco
		icon = morocco_attack
		cost = 3
		
		available = {
			OR = {
				has_government = communist
				has_government = revolutionary_socialist
				has_government = monarchist
				has_government = fascist
			}

		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_fopo_pursue_friendship_with_morocco
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_addressing_our_neighbors
		}

		relative_position_id = SPR_stalinist_fopo_addressing_our_neighbors
		x = -3
		y = 1

		completion_reward = {
			add_opinion_modifier = {
				target = MOR
				modifier = embargo
			}
			MOR = {
				add_opinion_modifier = {
					target = ROOT
					modifier = embargo
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_reach_out_to_algeria
		icon = algeria
		cost = 4
		
		available = {
			has_army_manpower = {
				size > 500000
			}
			ALG = {
				OR = {
					has_government = communist
					has_government = revolutionary_socialist
				}
			}
			NOT = {
				has_war_with = ALG
			}
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_fopo_right_francos_wrong
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_embargo_morocco
		}

		relative_position_id = SPR_stalinist_fopo_embargo_morocco
		x = 1
		y = 1
		
		completion_reward = {
            add_opinion_modifier = {
				target = ALG
				modifier = spr_por_normalized_relations
			}
			country_event = {
				id = spain_diplo.81
			}
			ALG = {
				country_event = {
					id = spain_diplo.82
				}
                add_opinion_modifier = {
					target = ROOT
					modifier = spr_por_normalized_relations
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_mutual_intervention_in_morocco
		icon = SPR_algerian_war_on_morocco
		cost = 8
		
		available = {
			NOT = {
				has_war_with = ALG
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_reach_out_to_algeria
		}

		relative_position_id = SPR_stalinist_fopo_reach_out_to_algeria
		x = 0
		y = 1
		
		completion_reward = {
			ALG = {
				country_event = {
					id = spain_diplo.83
				}
			}
			custom_effect_tooltip = spr_mutual_intervention
		}
	}
	focus = {
		id = SPR_stalinist_fopo_right_francos_wrong
		icon = Correct_Francos_Mistake_SPR
		cost = 4
		
		available = {
			has_army_manpower = {
				size > 500000
			}
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_fopo_reach_out_to_algeria
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_embargo_morocco
		}

		relative_position_id = SPR_stalinist_fopo_embargo_morocco
		x = -1
		y = 1
		
		completion_reward = {
			create_wargoal = {
				type = annex_everything
				target = MOR
			}
			290 = {
				add_claim_by = ROOT
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_reorganize_the_protectorate
		icon = RUB_expel_foreign_nationalists
		cost = 8
		
		available = {
			owns_state = 290
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_right_francos_wrong
		}

		relative_position_id = SPR_stalinist_fopo_right_francos_wrong
		x = 0
		y = 1
		
		completion_reward = {
			random_owned_state = {
				limit = {
					is_core_of = ROOT
				}
				add_manpower = -600
			}
			random_owned_state = {
				limit = {
					is_core_of = ROOT
				}
				add_manpower = -500
			}
			random_owned_state = {
				limit = {
					is_core_of = ROOT
				}
				add_manpower = -500
			}
			random_owned_state = {
				limit = {
					is_core_of = ROOT
				}
				add_manpower = -400
			}
			290 = {
				add_manpower = 2000
			}
			290 = {
				add_core_of = ROOT
			}
			IF = {
				limit = {
					country_exists = MOR
					MOR = {
						is_puppet_of = ROOT
					}
				}
				MOR = {
					add_ideas = {
						idea_spr_spanish_communist_dominance
					}
				}
			}
			country_event = {
				id = spain.352
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_the_new_army_of_africa
		icon = military_drill
		cost = 10
		
		prerequisite = {
			focus = SPR_stalinist_fopo_reorganize_the_protectorate
			focus = SPR_stalinist_fopo_mutual_intervention_in_morocco
		}

		relative_position_id = SPR_stalinist_fopo_reorganize_the_protectorate
		x = 1
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_spr_new_army_of_africa
			}
			IF = {
				limit = {
					country_exists = MOR
					MOR = {
						is_puppet_of = ROOT
					}
				}
				MOR = {
					add_ideas = {
						idea_spr_new_army_of_africa
					}
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_the_gibraltar_issue
		icon = SPR_fopo_the_gibraltar_issue
		cost = 6
		
		available = {
			NOT = {
				owns_state = 118
			}
			OR = {
				has_war = no
				threat > 0.6
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_addressing_our_neighbors
		}

		relative_position_id = SPR_stalinist_fopo_addressing_our_neighbors
		x = 2
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					OR = {
						has_government = liberal
						has_government = national_conservative
						has_government = centrist
						has_government = moderate_socialist
						has_government = new_democrat
					}
				}
				ENG = {
					country_event = {
						id = spain_diplo.32
					}
				}
			}
			IF = {
				limit = {
					OR = {
						has_government = fascist
						has_government = national_bolshevik
						has_government = communist
						has_government = monarchist
						has_government = revolutionary_socialist
					}
				}
				ENG = {
					country_event = {
						id = spain_diplo.35
					}
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_reconciliation_with_france
		icon = france
		cost = 7
		
		mutually_exclusive = {
			focus = SPR_stalinist_fopo_fortify_the_pyrenees
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_addressing_our_neighbors
		}
		
		available = {
			FRA = {
				has_government = communist
			}
		}

		relative_position_id = SPR_stalinist_fopo_addressing_our_neighbors
		x = -8
		y = 1
		
		completion_reward = {
            add_opinion_modifier = {
				target = FRA
				modifier = spr_por_normalized_relations
			}
			country_event = {
				id = spain_diplo.95
			}
            FRA = {
                add_opinion_modifier = {
					target = ROOT
					modifier = spr_por_normalized_relations
				}
				country_event = {
					id = spain_diplo.96
				}
            }
		}
	}
	focus = {
		id = SPR_stalinist_fopo_fortify_the_pyrenees
		icon = france_attack
		cost = 7
		
		available = {
			FRA = {
				NOT = {
					has_government = communist
				}
			}
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_fopo_reconciliation_with_france
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_addressing_our_neighbors
		}

		relative_position_id = SPR_stalinist_fopo_addressing_our_neighbors
		x = -10
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					owns_state = 165
				}
				165 = {
					add_building_construction = {
						type = bunker
						level = 3
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
					}
				}
			}
			IF = {
				limit = {
					owns_state = 911
				}
				911 = {
					add_building_construction = {
						type = bunker
						level = 3
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
					}
				}
			}
			IF = {
				limit = {
					owns_state = 852
				}
				852 = {
					add_building_construction = {
						type = bunker
						level = 3
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
					}
				}
			}
			IF = {
				limit = {
					owns_state = 166
				}
				166 = {
					add_building_construction = {
						type = bunker
						level = 3
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
					}
				}
			}
			IF = {
				limit = {
					owns_state = 172
				}
				172 = {
					add_building_construction = {
						type = bunker
						level = 3
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
					}
				}
			}
		}
	}

	focus = {
		id = SPR_stalinist_fopo_expand_airbases
		icon = focus_a_new_international_airport
		cost = 5
		
		prerequisite = {
			focus = SPR_stalinist_fopo_prepare_for_communist_invasion
		}

		relative_position_id = SPR_stalinist_fopo_fortify_the_pyrenees
		x = 0
		y = 2
		
		completion_reward = {
			IF = {
				limit = {
					owns_state = 165
				}
				165 = {
					add_building_construction = {
						type = air_base
						level = 5
						instant_build = yes
					}
				}
			}
			IF = {
				limit = {
					owns_state = 852
				}
				852 = {
					add_building_construction = {
						type = air_base
						level = 5
						instant_build = yes
					}
				}
			}
			IF = {
				limit = {
					owns_state = 166
				}
				166 = {
					add_building_construction = {
						type = air_base
						level = 5
						instant_build = yes
					}
				}
			}
			IF = {
				limit = {
					owns_state = 172
				}
				172 = {
					add_building_construction = {
						type = air_base
						level = 5
						instant_build = yes
					}
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_surveil_the_border
		icon = GFX_the_surveillance_state_perfected
		cost = 5
		
		prerequisite = {
			focus = SPR_stalinist_fopo_expand_airbases
		}

		relative_position_id = SPR_stalinist_fopo_expand_airbases
		x = 0
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_spr_surveil_the_border
			}
			add_tech_bonus = {
				bonus = 1.25
				uses = 4
				category = radar_tech
			}
			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.5
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_prepare_for_communist_invasion
		icon = position_armies
		cost = 8
		
		prerequisite = {
			focus = SPR_stalinist_fopo_fortify_the_pyrenees
		}

		relative_position_id = SPR_stalinist_fopo_fortify_the_pyrenees
		x = 0
		y = 1
		
		completion_reward = {
			add_war_support = 0.05
		    random_owned_state = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		    random_owned_state = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_sabotage_french_military_command
		icon = infiltration
		cost = 10
		
		available = {
			OR = {
				AND = {
					NOT = {
						has_idea = idea_SPR_bloated_military
					}
					NOT = {
						has_idea = idea_SPR_bloated_military_2
					}
				}
				has_war_with = FRA
			}
		}

		prerequisite = {
			focus = SPR_stalinist_fopo_surveil_the_border
		}

		relative_position_id = SPR_stalinist_fopo_prepare_for_communist_invasion
		x = 0
		y = 3
		
		completion_reward = {
			add_ideas = {
				idea_spr_infiltrated_french_military_command
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_aviation_innovations
		icon = GFX_goal_advan_fighters
		cost = 5
		
		prerequisite = {
			focus = SPR_stalinist_fopo_reconciliation_with_france
		}

		relative_position_id = SPR_stalinist_fopo_reconciliation_with_france
		x = 0
		y = 1
		
		completion_reward = {
			FRA = {
				country_event = {
					id = spain_diplo.130
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_resume_andorran_corulership
		icon = SPR_fopo_resume_andorran_corulership
		cost = 8
		
		prerequisite = {
			focus = SPR_stalinist_fopo_reconciliation_with_france
		}
		
		available = {
			owns_state = 852
		}

		relative_position_id = SPR_stalinist_fopo_reconciliation_with_france
		x = 2
		y = 1
		
		completion_reward = {
			FRA = {
				country_event = {
					id = spain_diplo.127
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_mutual_industrial_investments
		icon = peace_money_development
		cost = 5
		
		prerequisite = {
			focus = SPR_stalinist_fopo_aviation_innovations
		}

		relative_position_id = SPR_stalinist_fopo_aviation_innovations
		x = 0
		y = 1
		
		completion_reward = {
			FRA = {
				country_event = {
					id = spain_diplo.133
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_request_aid_in_nuclear_program
		icon = nukes
		cost = 10
		
		prerequisite = {
			focus = SPR_stalinist_fopo_mutual_industrial_investments
		}

		relative_position_id = SPR_stalinist_fopo_mutual_industrial_investments
		x = 0
		y = 1
		
		completion_reward = {
			FRA = {
				country_event = {
					id = spain_diplo.136
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_our_international_alignment
		icon = play_off_both_sides
		cost = 1
		
		available = {
			has_completed_focus = stalinist_promote_anti_nationalism
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_foreign_policy
		}

		relative_position_id = SPR_stalinist_fopo_foreign_policy
		x = 4
		y = 1
		
		completion_reward = {
			add_political_power = 50
		}
	}
	focus = {
		id = SPR_stalinist_fopo_open_trade_with_the_EUSSR
		icon = european_union
		cost = 4
		
		available = {
			OR = {
				has_government = communist
				has_government = revolutionary_socialist
				has_government = moderate_socialist
				has_government = new_democrat
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_our_international_alignment
		}

		relative_position_id = SPR_stalinist_fopo_our_international_alignment
		x = -1
		y = 1
		
		completion_reward = {
			every_country = {
				limit = {
					has_idea = idea_eu_member
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = spain_eussr_trade
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_apply_for_warsaw_pact_aid
		icon = warsaw_pact_investment
		cost = 6
		
		available = {
			OR = {
				AND = {
					country_exists = SOV
					SOV = {
						is_faction_leader = yes
						has_government = communist
					}
				}
				AND = {
					country_exists = GER
					GER = {
						is_faction_leader = yes
						has_government = communist
					}
				}
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_open_trade_with_the_EUSSR
		}

		relative_position_id = SPR_stalinist_fopo_open_trade_with_the_EUSSR
		x = 0
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					AND = {
						country_exists = SOV
						SOV = {
							has_government = communist
							is_faction_leader = yes
						}
					}
				}
				SOV = {
					country_event = {
						id = spain_diplo.149
					}
				}
			}
			ELSE_IF = {
				limit = {
					AND = {
						country_exists = GER
						GER = {
							has_government = communist
							is_faction_leader = yes
						}
					}
				}
				GER = {
					country_event = {
						id = spain_diplo.149
					}
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_join_the_warsaw_pact
		icon = warsaw_pact
		cost = 5
		
		available = {
			AND = {
				OR = {
					AND = {
						country_exists = SOV
						SOV = {
							is_faction_leader = yes
							has_government = communist
						}
					}
					AND = {
						country_exists = GER
						GER = {
							is_faction_leader = yes
							has_government = communist
						}
					}
				}
				NOT = {
					has_country_flag = GAL_warsaw_refused_to_ally_us
				}
				has_government = communist
			}
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_fopo_policy_of_neutrality
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_apply_for_warsaw_pact_aid
		}

		relative_position_id = SPR_stalinist_fopo_apply_for_warsaw_pact_aid
		x = 0
		y = 2
		
		completion_reward = {
			IF = {
				limit = {
					AND = {
						country_exists = SOV
						SOV = {
							has_government = communist
							is_faction_leader = yes
						}
					}
				}
				SOV = {
					country_event = {
						id = spain_diplo.112
					}
				}
			}
			ELSE_IF = {
				limit = {
					AND = {
						country_exists = GER
						GER = {
							has_government = communist
							is_faction_leader = yes
						}
					}
				}
				GER = {
					country_event = {
						id = spain_diplo.112
					}
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_apply_for_eussr_membership
		icon = CUB_establish_ties_with_eu
		cost = 7.2
		
		available = {
			OR = {
				GER = {
					has_idea = idea_eu_member
				}
				ITA = {
					has_idea = idea_eu_member
				}
				FRA = {
					has_idea = idea_eu_member
				}
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_join_the_warsaw_pact
		}

		relative_position_id = SPR_stalinist_fopo_join_the_warsaw_pact
		x = -1
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					ITA = {
						has_completed_focus = ITA_unite_the_eu
					}
				}
				ITA = {
					country_event = {
						id = spain_diplo.152
					}
				}
			}
			ELSE_IF = {
				limit = {
					NOT = {
						ITA = {
							has_completed_focus = ITA_unite_the_eu
						}
					}
				}
				add_ideas = {
					idea_eu_member
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_the_irrevocability_of_marxism_leninism
		icon = GFX_goal_worker_with_hammer_and_flag
		cost = 8
		
		prerequisite = {
			focus = SPR_stalinist_fopo_join_the_warsaw_pact
		}

		relative_position_id = SPR_stalinist_fopo_join_the_warsaw_pact
		x = 0
		y = 2
		
		completion_reward = {
			add_ideas = {
				idea_spr_vanguards_of_socialism
			}
			every_country = {
				limit = {
					is_in_faction_with = ROOT
					NOT = {
						tag = ROOT
					}
				}
				add_ideas = {
					idea_spr_vanguards_of_socialism
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_purchase_russian_oil_rights
		icon = offshore_oil
		cost = 4
		
		available = {
			OR = {
				AND = {
					country_exists = SOV
					SOV = {
						has_government = communist
					}
				}
				AND = {
					country_exists = RUS
					RUS = {
						has_government = national_bolshevik
					}
				}
			}
		}
		
		bypass = {
			NOT = {
				country_exists = SOV
				RUS = {
					has_government = national_bolshevik
				}
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_our_international_alignment
		}

		relative_position_id = SPR_stalinist_fopo_our_international_alignment
		x = 1
		y = 1
		
		completion_reward = {
			SOV = {
				country_event = {
					id = spain_diplo.155
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_invite_russian_military_advisors
		icon = soviet_military
		cost = 6
		
		available = {
			OR = {
				AND = {
					country_exists = SOV
					SOV = {
						has_government = communist
					}
				}
				AND = {
					country_exists = RUS
					RUS = {
						has_government = national_bolshevik
					}
				}
			}
		}
		
		bypass = {
			NOT = {
				country_exists = SOV
				RUS = {
					has_government = national_bolshevik
				}
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_purchase_russian_oil_rights
		}

		relative_position_id = SPR_stalinist_fopo_purchase_russian_oil_rights
		x = 0
		y = 1
		
		completion_reward = {
			SOV = {
				country_event = {
					id = spain_diplo.158
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_seek_comecom_membership
		icon = comecon
		cost = 7.2
		
		available = {
			any_country = {
				has_idea = idea_comecon_member
			}
			NOT = {
				has_government = monarchist
				has_government = fascist
				has_government = nationalist
				has_government = national_conservative
				has_government = centrist
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_apply_for_warsaw_pact_aid
		}

		relative_position_id = SPR_stalinist_fopo_apply_for_warsaw_pact_aid
		x = -1
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					has_government = communist
				}
				add_ideas = {
					idea_comecon_member
				}
			}
			IF = {
				limit = {
					NOT = {
						has_government = communist
					}
				}
				add_ideas = {
					idea_comecon_observer
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_policy_of_neutrality
		icon = GFX_goal_generic_stable_government
		cost = 5
		
		available = {
			OR = {
				threat > 0.75
				custom_trigger_tooltip = {
					tooltip = spain_ww3_has_begun
					OR = {
						CAN = {
							has_war_with = RUS
						}
						RUS = {
							has_war_with = GER
						}
						GER = {
							has_war_with = CAN
						}
					}
				}
			}
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_fopo_join_the_warsaw_pact
		}
		
		prerequisite = {
			focus = SPR_stalinist_fopo_apply_for_warsaw_pact_aid
			focus = SPR_stalinist_fopo_invite_russian_military_advisors
		}

		relative_position_id = SPR_stalinist_fopo_our_international_alignment
		x = 1
		y = 4
		
		completion_reward = {
			add_ideas = {
				idea_gal_neutrality_focus
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_fortify_our_coasts
		icon = coastal_fort
		cost = 7.2
		
		prerequisite = {
			focus = SPR_stalinist_fopo_policy_of_neutrality
		}

		relative_position_id = SPR_stalinist_fopo_policy_of_neutrality
		x = 0
		y = 1
		
		completion_reward = {
			add_ideas = {
				idea_spr_coastal_fortification
			}
		}
	}
	focus = {
		id = SPR_stalinist_fopo_seek_the_protection_of_world_powers
		icon = play_off_both_sides
		cost = 8
		
		prerequisite = {
			focus = SPR_stalinist_fopo_fortify_our_coasts
		}

		relative_position_id = SPR_stalinist_fopo_fortify_our_coasts
		x = 0
		y = 1
		
		completion_reward = {
		    IF = {
				limit = {
					country_exists = CAN
				}
				CAN = {
					country_event = {
						id = spain_diplo.100
					}
				}
			}
		    IF = {
				limit = {
					country_exists = RUS
				}
				RUS = {
					country_event = {
						id = spain_diplo.100
					}
				}
			}
		    IF = {
				limit = {
					country_exists = SOV
				}
				SOV = {
					country_event = {
						id = spain_diplo.100
					}
				}
			}
		    IF = {
				limit = {
					country_exists = GER
				}
				GER = {
					country_event = {
						id = spain_diplo.100
					}
				}
			}
		    IF = {
				limit = {
					country_exists = ENG
				}
				ENG = {
					country_event = {
						id = spain_diplo.100
					}
				}
			}
		}
	}
	#navy and air
	focus = {
		id = SPR_stalinist_navy_and_air_sea_and_sky
		icon = air_defense
		cost = 3
		
		available = {
			custom_trigger_tooltip = {
				tooltip = spain_we_have_stabilized_our_government_and_solved_our_military
				has_completed_focus = stalinist_the_spanish_socialist_state_secured
				NOT = {
					has_idea = idea_SPR_lingering_military_radicalism
				}
				NOT = {
					has_idea = idea_SPR_lingering_republican_radicalism
				}
				NOT = {
					has_idea = idea_SPR_bloated_military
				}
				NOT = {
					has_idea = idea_SPR_bloated_military_2
				}
			}
		}

		x = 25
		y = 7
		
		completion_reward = {
			add_ideas = {
				idea_spr_spanish_air_force_1
			}
			add_ideas = {
				idea_spr_spanish_navy_1
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_develop_aircraft_carrier_designs
		icon = carrier
		cost = 3
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_sea_and_sky
		}

		relative_position_id = SPR_stalinist_navy_and_air_sea_and_sky
		x = 0
		y = 1
		
		completion_reward = {
			add_tech_bonus = {
				bonus = 1
				uses = 2
				category = cv_tech
			}
			add_breakthrough_progress = {
				specialization = specialization_naval
				value = 0.5
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_fund_the_alcala_de_henares_air_academy
		icon = air_icon
		cost = 4
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_sea_and_sky
		}

		relative_position_id = SPR_stalinist_navy_and_air_sea_and_sky
		x = 2
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					NOT = {
						has_completed_focus = SPR_stalinist_navy_and_air_expand_alcantarilla_air_manufacturing
					}
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_air_force_1
					add_idea = idea_spr_spanish_air_force_with_alcala_academy
				}
			}
			IF = {
				limit = {
					has_completed_focus = SPR_stalinist_navy_and_air_expand_alcantarilla_air_manufacturing
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing
					add_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing_and_alcala_academy
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_expand_alcantarilla_air_manufacturing
		icon = air_production
		cost = 7.2
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_sea_and_sky
		}
		
		available = {
			owns_state = 168
			has_completed_focus = stalinist_begin_rapid_industrial_modernization
		}

		relative_position_id = SPR_stalinist_navy_and_air_sea_and_sky
		x = 4
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					NOT = {
						has_completed_focus = SPR_stalinist_navy_and_air_fund_the_alcala_de_henares_air_academy
					}
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_air_force_1
					add_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing
				}
			}
			IF = {
				limit = {
					has_completed_focus = SPR_stalinist_navy_and_air_fund_the_alcala_de_henares_air_academy
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_air_force_with_alcala_academy
					add_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing_and_alcala_academy
				}
			}
		    168 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_prepare_elite_airborne_brigades
		icon = paratroopers
		cost = 5
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_expand_alcantarilla_air_manufacturing
		}
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_fund_the_alcala_de_henares_air_academy
		}

		relative_position_id = SPR_stalinist_navy_and_air_expand_alcantarilla_air_manufacturing
		x = 1
		y = 1
		
		completion_reward = {
			add_tech_bonus = {
				bonus = 0.5
				uses = 2
				category = para_tech
			}
			IF = {
				limit = {
					NOT = {
						has_completed_focus = SPR_stalinist_navy_and_air_modernize_ground_support
					}
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing_and_alcala_academy
					add_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing_and_alcala_academy_and_paratroopers
				}
			}
			IF = {
				limit = {
					has_completed_focus = SPR_stalinist_navy_and_air_modernize_ground_support
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing_and_alcala_academy_and_ground_support
					add_idea = idea_spr_spanish_air_force_full
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_prioritize_light_aircraft
		icon = generic_fighter
		cost = 3
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_expand_alcantarilla_air_manufacturing
		}
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_fund_the_alcala_de_henares_air_academy
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_navy_and_air_prioritize_heavy_aircraft
		}

		relative_position_id = SPR_stalinist_navy_and_air_fund_the_alcala_de_henares_air_academy
		x = -1
		y = 1
		
		completion_reward = {
			add_tech_bonus = {
				bonus = 1
				uses = 2
				category = light_air
			}
			add_tech_bonus = {
				bonus = 0.5
				uses = 1
				category = cat_air_engine
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_prioritize_heavy_aircraft
		icon = plane_art
		cost = 3
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_expand_alcantarilla_air_manufacturing
		}
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_fund_the_alcala_de_henares_air_academy
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_navy_and_air_prioritize_light_aircraft
		}

		relative_position_id = SPR_stalinist_navy_and_air_fund_the_alcala_de_henares_air_academy
		x = 1
		y = 1
		
		completion_reward = {
			add_tech_bonus = {
				bonus = 1
				uses = 2
				category = medium_air
			}
			add_tech_bonus = {
				bonus = 0.5
				uses = 1
				category = cat_air_guns
			}
			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.5
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_modernize_ground_support
		icon = drone
		cost = 5
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_prioritize_heavy_aircraft
			focus = SPR_stalinist_navy_and_air_prioritize_light_aircraft
		}

		relative_position_id = SPR_stalinist_navy_and_air_prioritize_light_aircraft
		x = 1
		y = 1
		
		completion_reward = {
			IF = {
				limit = {
					NOT = {
						has_completed_focus = SPR_stalinist_navy_and_air_prepare_elite_airborne_brigades
					}
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing_and_alcala_academy
					add_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing_and_alcala_academy_and_ground_support
				}
			}
			IF = {
				limit = {
					has_completed_focus = SPR_stalinist_navy_and_air_prepare_elite_airborne_brigades
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_air_force_with_alcantarilla_air_manufacturing_and_alcala_academy_and_paratroopers
					add_idea = idea_spr_spanish_air_force_full
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_reconstitute_the_naval_military_academy
		icon = navy_doctrine
		cost = 5
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_sea_and_sky
		}

		relative_position_id = SPR_stalinist_navy_and_air_sea_and_sky
		x = -2
		y = 1
		
		completion_reward = {
			swap_ideas = {
				remove_idea = idea_spr_spanish_navy_1
				add_idea = idea_spr_spanish_navy_naval_academy
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_militar_de_carrera
		icon = naval_occupation
		cost = 7.2
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_reconstitute_the_naval_military_academy
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_navy_and_air_militar_de_complemento
		}

		relative_position_id = SPR_stalinist_navy_and_air_reconstitute_the_naval_military_academy
		x = 1
		y = 1
		
		completion_reward = {
			swap_ideas = {
				remove_idea = idea_spr_spanish_navy_naval_academy
				add_idea = idea_spr_spanish_navy_carrera
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_militar_de_complemento
		icon = military_academy
		cost = 7.2
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_reconstitute_the_naval_military_academy
		}
		
		mutually_exclusive = {
			focus = SPR_stalinist_navy_and_air_militar_de_carrera
		}

		relative_position_id = SPR_stalinist_navy_and_air_reconstitute_the_naval_military_academy
		x = -1
		y = 1
		
		completion_reward = {
			swap_ideas = {
				remove_idea = idea_spr_spanish_navy_naval_academy
				add_idea = idea_spr_spanish_navy_complemento
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_elite_marine_training
		icon = SPR_marine_infantry_focus_icon
		cost = 7.2
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_militar_de_complemento
			focus = SPR_stalinist_navy_and_air_militar_de_carrera
		}

		relative_position_id = SPR_stalinist_navy_and_air_militar_de_complemento
		x = 1
		y = 1
		
		completion_reward = {
			add_tech_bonus = {
				bonus = 0.5
				uses = 2
				category = marine_tech
			}
			IF = {
				limit = {
					NOT = {
						has_completed_focus = SPR_stalinist_navy_and_air_militar_de_carrera
					}
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_navy_complemento
					add_idea = idea_spr_spanish_navy_complemento_marines
				}
			}
			IF = {
				limit = {
					has_completed_focus = SPR_stalinist_navy_and_air_militar_de_carrera
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_navy_carrera
					add_idea = idea_spr_spanish_navy_carrera_marines
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_invest_in_amphibious_vehicles
		icon = SPR_amphibious_vehicle_focus
		cost = 7.2
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_elite_marine_training
		}

		relative_position_id = SPR_stalinist_navy_and_air_elite_marine_training
		x = 0
		y = 1
		
		completion_reward = {
			add_tech_bonus = {
				bonus = 1
				uses = 2
				category = tp_tech
			}
			IF = {
				limit = {
					NOT = {
						has_completed_focus = SPR_stalinist_navy_and_air_militar_de_carrera
					}
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_navy_complemento_marines
					add_idea = idea_spr_spanish_navy_complemento_finished
				}
			}
			IF = {
				limit = {
					has_completed_focus = SPR_stalinist_navy_and_air_militar_de_carrera
				}
				swap_ideas = {
					remove_idea = idea_spr_spanish_navy_carrera_marines
					add_idea = idea_spr_spanish_navy_carrera_finished
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_expand_cartagena_shipbuilding_industry
		icon = build_navy
		cost = 5
		
		available = {
			owns_state = 168
			has_completed_focus = stalinist_begin_rapid_industrial_modernization
		}
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_sea_and_sky
		}

		relative_position_id = SPR_stalinist_navy_and_air_sea_and_sky
		x = -4
		y = 1
		
		completion_reward = {
		    168 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_modernize_cantabrian_dockyards
		icon = scottish_military_industry
		cost = 5
		
		available = {
			owns_state = 1019
			has_completed_focus = stalinist_begin_rapid_industrial_modernization
		}
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_sea_and_sky
		}

		relative_position_id = SPR_stalinist_navy_and_air_sea_and_sky
		x = -6
		y = 1
		
		completion_reward = {
		    1019 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = SPR_stalinist_navy_and_air_develop_the_straits_maritime_zone
		icon = cruiser
		cost = 10
		
		available = {
			OR = {
				owns_state = 169
				any_country = {
					is_puppet_of = ROOT
					owns_state = 169
				}
			}
			OR = {
				owns_state = 173
				any_country = {
					is_puppet_of = ROOT
					owns_state = 173
				}
			}
		}
		
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_modernize_cantabrian_dockyards
		}
		prerequisite = {
			focus = SPR_stalinist_navy_and_air_expand_cartagena_shipbuilding_industry
		}

		relative_position_id = SPR_stalinist_navy_and_air_modernize_cantabrian_dockyards
		x = 1
		y = 1
		
		completion_reward = {
		    169 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		    173 = {
			    add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			IF = {
				limit = {
					owns_state = 118
				}
				118 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			IF = {
				limit = {
					OR = {
						owns_state = 931
						any_country = {
							owns_state = 931
							is_puppet_of = ROOT
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			IF = {
				limit = {
					OR = {
						owns_state = 921
						any_country = {
							owns_state = 921
							is_puppet_of = ROOT
						}
					}
				}
				921 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
}
